---
import { Icon } from 'astro-icon/components'
import { getLangFromUrl } from '../i18n/utils'
import languages from '../i18n/languages'

const lang = getLangFromUrl(Astro.url)
const notSelectedLags = Object.keys(languages).filter((l) => l !== lang)
---

<div class="relative">
  <button id="lang-button" class="flex items-center gap-2 rounded-md px-2 py-1">
    <p>{languages[lang]}</p>
    <Icon name="mdi:keyboard-arrow-down" />
  </button>
  <ul id="lang-list" class="hidden w-full mt-2 absolute rounded-md py-1 px-2">
    {
      notSelectedLags.map((lang) => (
        <a href={`/${lang}/`} class="w-full hover:bg">
          {languages[lang]}
        </a>
      ))
    }
  </ul>
</div>

<script is:inline>
  const langButton = document.getElementById('lang-button')
  const langList = document.getElementById('lang-list')

  langButton.addEventListener('click', () => {
    langList.classList.toggle('hidden')
  })
</script>
