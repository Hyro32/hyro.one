---
import { getCollection } from 'astro:content'
import { getLangFromUrl } from '../i18n/utils'
import BlogPostCard from './cards/BlogPostCard.astro'

const posts = await getCollection('blog')
const lang = getLangFromUrl(Astro.url)
const filteredByLangPosts = posts.filter(
  (post) => post.slug.split('/')[0] === lang
)
---

<ul class="latest-posts">
  {filteredByLangPosts.map((post) => <BlogPostCard post={post} />)}
</ul>

<style>
  .latest-posts {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    gap: 40px;
    padding: 0;
  }
</style>
