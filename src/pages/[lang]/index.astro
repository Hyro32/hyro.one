---
import type { GetStaticPaths } from 'astro'
import {
  REPOS_ENDPOINT,
  PAGE_TITLE,
  techonologies,
  people,
  type Project
} from '../../common'
import { Image } from 'astro:assets'
import Layout from '../../layouts/Layout.astro'
import languages from '../../i18n/languages'
import ProjectCard from '../../components/ProjectCard.astro'
import PeopleCard from '../../components/PeopleCard.astro'

export const getStaticPaths = (() => {
  return Object.keys(languages).map((lang) => ({
    params: { lang }
  }))
}) satisfies GetStaticPaths

const { lang } = Astro.params
const title = PAGE_TITLE

const projects = await fetch(REPOS_ENDPOINT)
  .then((res) => res.json())
  .then((projects: Project[]) => projects)
---

<Layout {title} {lang}>
  <div class="flex flex-col items-center gap-8 mt-20 justify-evenly lg:flex-row">
    <div class="flex flex-col gap-3 text-center lg:w-1/2 lg:text-start">
      <h2 class="text-xl font-semibold">Hi, I'm Marcos</h2>
      <p class="text-gray-600 text-balance">
        I am a 18 year old boy based at <strong>Spain</strong>. Currently I'm
        studying a Information Systems Engineering at the <strong>UAH</strong>.
        I am passionate about how a few simple lines of code can turn into
        something so fascinating.
      </p>
      <ul class="flex items-center justify-center gap-3 lg:justify-start">
        {
          techonologies.map((tech) => (
            <li>
              <a href={tech.link}>
                <Image
                  src={tech.icon}
                  alt={tech.link}
                  width={20}
                  height={20}
                  loading="eager"
                />
              </a>
            </li>
          ))
        }
      </ul>
    </div>
    <Image
      class="hidden rounded-full shadow-md ring-1 ring-gray-400 md:hidden lg:block"
      src="https://avatars.githubusercontent.com/Mardroide?v=4"
      alt="Marcos Corrochano"
      loading="eager"
      width={240}
      height={240}
    />
  </div>
  <div class="flex flex-col gap-6 my-20">
    <div class="flex items-center justify-between">
      <h2 class="text-xl">Projects</h2>
      <a
        href="https://github.com/sphealhub"
        target="_blank"
        class="text-blue-500 duration-200 hover:scale-105"
        >Check out my organization!</a
      >
    </div>
    <ul class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {projects.map((project: Project) => <ProjectCard {project} />)}
    </ul>
  </div>
  <div class="flex flex-col gap-6 my-20">
    <h2 class="text-xl">People</h2>
    <ul class="grid grid-cols-2 gap-6 md:grid-cols-4 lg:grid-cols-6">
      {
        people.map(({ name, image, url }) => (
          <PeopleCard {name} {image} {url} />
        ))
      }
    </ul>
  </div>
</Layout>
