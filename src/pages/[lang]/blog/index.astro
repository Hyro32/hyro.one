---
import type { GetStaticPaths } from 'astro'
import { getCollection } from 'astro:content'
import languages from '../../../i18n/languages'
import Layout from '../../../layouts/Layout.astro'

export const getStaticPaths = (() => {
  return Object.keys(languages).map((lang) => ({
    params: { lang }
  }))
}) satisfies GetStaticPaths

const { lang } = Astro.params

const blog = await getCollection('blog')
const filteredPosts = blog.filter((post) => post.slug.split('/')[0] === lang)
const title = 'mardroide.dev - blog'
---

<Layout {lang} {title}>
  <ul>
    {
      filteredPosts.map((post) => (
        <a href={`${post.slug.split('/')[1]}`}>{post.data.title}</a>
      ))
    }
  </ul>
</Layout>
